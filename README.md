# FastAPI-Fibonacci Documentation

## 概要
このプロジェクトは、FastAPIを使用して実装されたフィボナッチ数列を計算するWeb APIです。ユーザーはエンドポイントに整数をクエリパラメータとして指定し、その位置に対応するフィボナッチ数を取得できます。また、負の整数や浮動小数点数、文字列などの不正な入力に対して適切なエラーレスポンスを返します。

## プロジェクト構成
```
fastapi-fibonacci/
│
├── fastapi_fibonacci/
│   ├── __pycache__/
│   ├── __init__.py
│   ├── main.py
│   └── test_main.py
│
├── tests/
│
├── poetry.lock
├── Procfile
├── pyproject.toml
├── README.md
└── requirements.txt
```

### ディレクトリおよびファイルの説明

#### 1. `fastapi_fibonacci/`
このディレクトリは、FastAPIアプリケーションのソースコードが含まれているメインディレクトリです。

- **`__pycache__/`**: 
  Pythonのキャッシュファイルが保存されるディレクトリです。実行時に自動的に生成されます。

- **`__init__.py`**: 
  このファイルはディレクトリをPythonのパッケージとして扱うためのものです。現在は空で、パッケージ化の役割を果たしています。

- **`main.py`**: 
  FastAPIアプリケーションのエントリーポイントです。以下のような機能を持ちます。
  - **フィボナッチ数列の計算**: `/fib`エンドポイントにクエリパラメータ`n`を指定することで、その位置のフィボナッチ数を計算します。
  - **エラーハンドリング**: 負の整数、浮動小数点数、文字列などの不正な入力に対して適切なエラーメッセージを返します。

- **`test_main.py`**: 
  `unittest`フレームワークを使用して`main.py`のエンドポイントをテストするスクリプトです。さまざまなクエリパラメータに対するAPIのレスポンスが期待通りであることを確認します。

#### 2. `tests/`
テストに関連するファイルや追加のテストケースを配置するためのディレクトリです。現在は空ですが、将来的にプロジェクトが拡張される際に、詳細なテストコードを追加するために使用されます。

#### 3. `poetry.lock` および `pyproject.toml`
これらのファイルは、プロジェクトの依存関係管理に使用されます。

- **`poetry.lock`**: 
  Poetryが依存関係のバージョンを管理するために使用するファイルです。インストールされる依存パッケージの正確なバージョンが記録されます。

- **`pyproject.toml`**: 
  Poetryによって管理されるプロジェクトの設定ファイルです。依存関係のリストやプロジェクトのメタデータが記述されています。

#### 4. `Procfile`
HerokuなどのPaaS（Platform as a Service）でアプリケーションをデプロイする際に使用する設定ファイルです。通常、このファイルには起動コマンドが記述されており、FastAPIアプリケーションを起動するための`uvicorn`コマンドが含まれています。

#### 5. `README.md`
プロジェクトの概要や使用方法、エンドポイントの説明、セットアップ手順などが記述されるべきファイルです。ユーザーがプロジェクトを理解しやすくするためのドキュメントが含まれます。

#### 6. `requirements.txt`
FastAPIアプリケーションの依存関係をリスト化したファイルです。`pip`でのインストールに使用され、例えば以下のようなパッケージが含まれる場合があります。

```
fastapi
uvicorn
pydantic
```

## 使用方法

### 1. **セットアップ**
Poetryを使用して依存関係をインストールします。

```bash
poetry install
```

### 2. **サーバーの起動**
以下のコマンドでサーバーを起動します。

```bash
uvicorn fastapi_fibonacci.main:app --reload
```

または、以下のようにPythonスクリプトとして起動することもできます。

```bash
python main.py
```

### 3. **エンドポイント**
- **GET `/fib?n=<整数>`**
  - クエリパラメータ`n`に指定された整数に対応するフィボナッチ数を返します。
  - **例**: `/fib?n=10` → `{"result": 55}`

- **エラーレスポンス**
  - 負の整数や浮動小数点数、文字列がクエリパラメータに指定された場合、400エラーと共に以下のようなレスポンスが返されます。
    ```json
    {
      "status": 400,
      "message": "Badrequest."
    }
    ```

## テストの実行
`unittest`を使用して、テストスクリプトを実行します。

```bash
python -m unittest tests/test_main.py
```

## デプロイ
`Procfile`を用いて、Herokuにデプロイ済み
- エンドポイントURL
```bash
https://fastapi-fibonacci-a3bd910a9bde.herokuapp.com/
```
